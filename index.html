<!DOCTYPE html><html><head><title>Async + Await</title><meta charset="utf-8"><script src="slides.js"></script><link href="https://fonts.googleapis.com/css?family=Gravitas+One|Yeseva+One" rel="stylesheet"><link href="styles.css" rel="stylesheet" type="text/css"></head><body><section class="slides layout-regular template-default"><article class="first"><h3><img src="images/sink.svg" width="300"><img src="images/weight.svg" width="300"></h3><h1><mark>Async + Await</mark></h1><p></p><p></p><p style="margin:0;" class="sub yellow">I <strong>promise</strong> you'll like this talk</p><p class="sub"><small>Ugh</small></p></article><article><h1><mark>I&apos;m Wes Bos</mark></h1><p><br></p><p class="sub"><img src="images/canada-flag.png"><img src="images/canada-flag.png"><img src="images/canada-flag.png"><img src="images/canada-flag.png"><img src="images/canada-flag.png"><img src="images/canada-flag.png"></p></article>
<article><h1>Flow Control in JS is Hard</h1></article><article class="section"><h1>Promises</h1><p class="sub">The Foundation of Async + Await</p></article><article><h2 class="skew"><mark>Promises are an IOU for something that will happen in the future</mark></h2></article><article><ul class="build"><li>AJAX call returning data</li><li>Access to a User's webcam</li><li>Resizing an image</li></ul></article><article><h2 class="skew"><mark>All of these things take time, we simply kick off the process and move along with our lives.</mark></h2></article><article><h1>But why do we do it this way?</h1></article><article><h1>JavaScript Waits for no one!</h1></article><article><h1>Almost Everything Is Asynchronous</h1></article><article><h2 class="title"><mark>Let's say we wanted to do a few things:</mark></h2><ul class="build"><li>Make Coffee</li><li>Drink Coffee</li><li>Cook Breakfast</li><li>Eat Breakfast</li></ul></article><article><p><mark>Do you need to finish making coffee before you can Start Breakfast?</mark></p><br><br><p><mark>Would it make sense to <mark>wait until</mark> coffee is made and consumed before we even start cooking breakfast?</mark></p></article><article><h2><mark>no!</mark></h2><p>we want to start one thing, come back to it once it's finished, and deal with the result accordingly!</p></article><article><h1>Christmas Tree Callback Hell</h1></article><article><img src="./images/screenshots/mvjp.png" class="wide"></article><article><img src="./images/screenshots/mw8s.png" class="high"></article><article><img src="./images/screenshots/mul6.png" class="high"></article><article><h2>Most new browser APIs are built on Promises</h2></article><article><h2><mark>fetch()</mark></h2></article><article><img src="./images/screenshots/mvNc.png" class="wide"></article><article><h2><mark>Axios</mark></h2></article><article><img src="./images/screenshots/mvvk.png" class="wide"></article><article><h2><mark>Many, many more</mark></h2><p class="sub flat">PaymentRequest, getUserMedia(), Web Animation API</p></article><article><h1>It's easy to make your own too!</h1></article><article><img src="./images/screenshots/mvlO.png" class="wide"></article><article><img src="./images/screenshots/mw1Y.gif" class="high"></article><article><h2><mark>we get it<br>Promises are great.</mark></h2></article><article class="section"><h1>buuuuuuttt</h1></article><article class="section"><h1>What's the deal with .then()?</h1><p class="sub">It's still kinda callback-y</p></article><article><h2>Any code that needs to come <mark>after the promise</mark> still needs to be <mark>in the final .then()</mark> callback<br>ðŸ˜•ðŸ˜•ðŸ˜•</h2></article><article class="section"><h1>Async <br>+<br> Await</h1></article><article class="section"><h2><mark>Async + Await still is promises,<br>but with a really nice syntax</mark></h2></article><article><img src="./images/screenshots/mul6.png" class="high"></article><article><img src="./images/screenshots/mv6R.png" class="high"></article><article><h1>Let's break it down</h1></article><article><h2><mark>JavaScript is almost entirely asynchronous / non-blocking</mark></h2></article><article><h1>great!<br>But it's hard to read/write</h1></article><article><h1>PHP</h1><img src="./images/screenshots/mufS.png" class="wide"></article><article><h1>JS</h1><img src="./images/screenshots/mw88.png" class="wide"></article><article><div class="build"><h2>ðŸ˜•ðŸ˜•ðŸ˜•</h2><p>The PHP is easier to read</p><p>The JS is more performant</p><p>I'm not really happy</p></div></article><article><h1>Synchronous looking code, without the wait!</h1></article><article><h1>How does it work?</h1></article><article><h1>1. Mark it as Async</h1></article><article><img src="./images/screenshots/mvxm.png" class="wide"></article><article><h1>2. await inside your async fn</h1></article><article><img src="./images/screenshots/mvLf.png" class="wide"></article><article><h1>Best of Both Worlds!</h1></article><article><h1>Another Example</h1></article><article><h2>Slow...</h2><img src="./images/screenshots/mvHv.png" class="wide"></article><article><h2><mark>Why wait for Wes?</mark></h2><p class="sub">Remember, async+await is just promises</p></article><article><img src="./images/screenshots/mvPr.png" alt="" class="wide"></article><article><h1>Error Handling</h1><p class="sub">A few options</p></article><article><p class="sub">Option #1</p><h1>Make sure Errors Don't Happen</h1><p class="sub">Why waste dev time on something that should never happen? #ProblemSolved</p></article><article><p class="sub">Option #2</p><h1>Try / Catch</h1><p class="sub">Wrap that sucker in a safety blanket</p></article><article><img src="http://wes.io/nslE/content" class="wide"></article><article><p class="sub">Option #4</p><h1>Higher Order Function</h1><p class="sub">Async Functions can chain a .then()</p></article><article><p>Just Live Your Life</p><img src="http://wes.io/nsg8/content" class="wide"></article><article><p>Create a HOF</p><img src="http://wes.io/nsi4/content" class="high"></article><article><p>Hot Shot Implicit Return (WHAT)</p><img src="http://wes.io/nsbK/content" class="wide"></article><article><p>Create a new function with your HOF</p><img src="http://wes.io/nsbz/content" class="wide"></article><article><h1>Very Handy in Node & Express!</h1></article><article><img src="http://wes.io/ntkI/content" class="wide"></article><article><img src="http://wes.io/nuqs/content" class="wide"><p>Normally we'd Handle each possible Error with next()</p></article><article><img src="http://wes.io/nunX/contnet" class="wide"></article><article><h2><mark>ðŸ¤” But that doesn't cover errors we throw, unhandled errors or syntax errors...</mark></h2></article><article><h1 class="medium">We need to catch all errors and pass along to the next middleware function</h1></article><article><h1>Enter HOF</h1></article><article><img src="http://wes.io/nteh/content" class="wide"></article><article><p><mark>Then we just wrap our routes!</mark></p><img src="http://wes.io/nuda/content" class="wide"><p><mark>Any unhandled error will simply get passed along to next()</mark></p></article><article><p class="sub">Option #4</p><h1>Handle The Error When you Call it</h1></article><article><img src="http://wes.io/nyqR/content" class="wide"></article><article><p class="sub">Option #5</p><h1 class="medium">Node's Unhandled Rejection Event</h1><p class="sub">Node.js will soon exit your process on unhandled rejected promises</p></article><article><img src="http://wes.io/ntqa/content" class="wide"></article><article><h1><mark>It's the Future!</mark></h1></article><article><h2><mark>Tips for Starting today</mark></h2><ol style="list-style:none;" class="build"><li>Write your APIs in Promises</li><li>Use Async + Await for Flow Control</li><li>Convert Older APIs with Promisify</li><li>Choose an Error Handling Strategy</li></ol></article><article><h1><mark>Thanks!</mark></h1><p class="sub"><a href="https://twitter.com/wesbos">I'm @wesbos</a></p></article></section></body></html>